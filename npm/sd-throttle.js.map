{"version":3,"file":"sd-throttle.js","sources":["../src/directive.js","../src/index.js"],"sourcesContent":["/**\n * @author CRM组\n * @date 2020/08/19\n * @description click节流，默认500ms\n */\n// 获取数据类型\nconst getInstance = function (data) {\n  // \"[object Array]\"\n  const instanceStr = Object.prototype.toString.call(data)\n  const index = instanceStr.indexOf(' ')\n  return instanceStr.substring(index + 1, instanceStr.length - 1)\n}\nexport default {\n  inserted: (el, binding) => {\n    let timer = null\n    let isThrottle = true // 外界影响节流因素\n    const timeout = +binding.arg\n    // 判断过期时间\n    if (Number.isNaN(timeout)) {\n      console.error(`error in [v-throttle:arg], invalid for \"arg\", Expected Numeric, got ${getInstance(binding.arg)}.`)\n      return\n    }\n    if (timeout < 0) {\n      console.error('error in [v-throttle:arg], invalid for \"arg\", Expected Nonnegative number')\n      return\n    }\n    // 判断外界影响节流因素\n    if (binding.value !== undefined) {\n      if (typeof binding.value !== 'boolean') {\n        console.error(`error in [v-throttle=\"value\"], invalid for \"value\", Expected Boolean, got ${getInstance(binding.value)}.`)\n        return\n      }\n      isThrottle = binding.value\n    }\n    el.parentElement && el.parentElement.addEventListener(\n      'click',\n      (e) => {\n        if (timer || !isThrottle) {\n          e.stopPropagation()\n          return\n        }\n        timer = setTimeout(() => {\n          clearTimeout(timer)\n          timer = null\n          // 未给值默认是500ms\n        }, timeout * 1000 || 500)\n      },\n      true\n    )\n  },\n}","import throttle from './directive'\n\nconst install = function (Vue) {\n  Vue.directive('throttle', throttle)\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.throttle = throttle\n  Vue.use(install); // eslint-disable-line\n}\n\nthrottle.install = install\nexport default throttle"],"names":["getInstance","data","instanceStr","Object","prototype","toString","call","index","indexOf","substring","length","install","Vue","directive","throttle","inserted","el","binding","timer","isThrottle","timeout","arg","Number","isNaN","console","error","undefined","value","parentElement","addEventListener","e","setTimeout","clearTimeout","stopPropagation","window","use"],"mappings":"kpBAMoB,SAAdA,EAAwBC,OAEtBC,EAAcC,OAAOC,UAAUC,SAASC,KAAKL,GAC7CM,EAAQL,EAAYM,QAAQ,YAC3BN,EAAYO,UAAUF,EAAQ,EAAGL,EAAYQ,OAAS,GCR/C,SAAVC,EAAoBC,GACxBA,EAAIC,UAAU,WAAYC,GDG5B,MAMe,CACbC,SAAU,SAACC,EAAIC,OACTC,EAAQ,KACRC,GAAa,EACXC,GAAWH,EAAQI,OAErBC,OAAOC,MAAMH,GACfI,QAAQC,oFAA6EzB,EAAYiB,EAAQI,mBAGvGD,EAAU,EACZI,QAAQC,MAAM,0FAIMC,IAAlBT,EAAQU,MAAqB,IACF,kBAAlBV,EAAQU,kBACjBH,QAAQC,0FAAmFzB,EAAYiB,EAAQU,aAGjHR,EAAaF,EAAQU,MAEvBX,EAAGY,eAAiBZ,EAAGY,cAAcC,iBACnC,QACA,SAACC,IACKZ,GAAUC,EAIdD,EAAQa,WAAW,WACjBC,aAAad,GACbA,EAAQ,MAEG,IAAVE,GAAkB,KAPnBU,EAAEG,oBASN,YCzCgB,oBAAXC,QAA0BA,OAAOtB,MAC1CsB,OAAOpB,SAAWA,EAClBF,IAAIuB,IAAIxB,IAGVG,EAASH,QAAUA"}